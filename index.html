<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>岁时记 - 丙午马年</title>
    
    <!-- 基础库 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 字体：引入更具质感的衬线体 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@200;400;700;900&family=Zhi+Mang+Xing&family=JetBrains+Mono:wght@100;400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* 核心调色盘：以朱砂红和宫廷金为主 */
            --c-bg: #fffcfc;
            --c-ink: #2a0a0a;
            --c-red: #b91c1c; /* 深度朱红 */
            --c-festive: #dc2626; /* 喜庆大红 */
            --c-gold: #d4af37; /* 鎏金 */
        }

        body { 
            font-family: 'Noto Serif SC', serif; 
            background-color: var(--c-bg);
            color: var(--c-ink);
            overflow-x: hidden;
            letter-spacing: 0.02em;
        }

        /* 喜庆流光背景：模拟红色丝绸与金粉 */
        .bg-mesh {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: 
                radial-gradient(at 0% 0%, rgba(220, 38, 38, 0.08) 0px, transparent 50%),
                radial-gradient(at 100% 0%, rgba(212, 175, 55, 0.05) 0px, transparent 50%),
                radial-gradient(at 50% 100%, rgba(185, 28, 28, 0.06) 0px, transparent 50%);
            filter: blur(60px);
        }

        /* 极致细腻的卡片 */
        .card-premium {
            background: rgba(255, 253, 253, 0.7);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(185, 28, 28, 0.1);
            box-shadow: 0 20px 50px rgba(185, 28, 28, 0.04);
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .card-premium:hover {
            transform: translateY(-8px);
            box-shadow: 0 30px 60px rgba(185, 28, 28, 0.08);
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(185, 28, 28, 0.3);
        }

        .font-shufa { font-family: 'Zhi Mang Xing', cursive; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }

        @keyframes slow-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-slow-rotate { animation: slow-rotate 30s linear infinite; }

        /* 马年特别装饰：福字底纹 */
        .fu-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20 0l20 20-20 20L0 20z' fill='%23b91c1c' fill-opacity='0.02' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        /* 英雄卡片：喜庆渐变 */
        .hero-festive {
            background: linear-gradient(145deg, #991b1b 0%, #dc2626 100%);
            position: relative;
            box-shadow: 0 25px 60px rgba(153, 27, 27, 0.3);
        }
        .hero-festive::after {
            content: '';
            position: absolute;
            inset: 0;
            background: url('https://www.transparenttextures.com/patterns/handmade-paper.png');
            opacity: 0.15;
            pointer-events: none;
        }

        ::-webkit-scrollbar { width: 0; }
        
        .gold-border {
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .seal-effect {
            background: var(--c-red);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            box-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="fu-pattern">
    <div class="bg-mesh"></div>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        const Icon = ({ children, size = 20, className = "" }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Icons = {
            Plus: (p) => <Icon {...p}><path d="M12 5v14M5 12h14"/></Icon>,
            Trash: (p) => <Icon {...p}><path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></Icon>,
            ArrowRight: (p) => <Icon {...p}><path d="M5 12h14M12 5l7 7-7 7"/></Icon>,
            Clock: (p) => <Icon {...p}><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></Icon>,
            Calendar: (p) => <Icon {...p}><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/></Icon>,
            Horse: (p) => <Icon {...p}><path d="M12 4c-4 0-6 2-6 6 0 2.5 1 4 3 5-1 1-1 3-1 3h4s1-3 1-5c2-1 3-2.5 3-5 0-4-2-6-4-6Z"/><path d="M9 14s-3 3-3 7h12c0-4-3-7-3-7"/></Icon>
        };

        const getBeijingTime = () => new Date(new Date().getTime() + (new Date().getTimezoneOffset() + 480) * 60000);

        const TimeDisplay = () => {
            const [now, setNow] = useState(getBeijingTime());
            useEffect(() => {
                const t = setInterval(() => setNow(getBeijingTime()), 1000);
                return () => clearInterval(t);
            }, []);

            const hours = now.getHours().toString().padStart(2, '0');
            const mins = now.getMinutes().toString().padStart(2, '0');
            const secs = now.getSeconds().toString().padStart(2, '0');

            const shichenList = ['子','丑','寅','卯','辰','巳','午','未','申','酉','戌','亥'];
            const shichenIdx = Math.floor((now.getHours() + 1) % 24 / 2);

            return (
                <div className="card-premium rounded-[40px] p-8 flex flex-col justify-between overflow-hidden relative border-l-4 border-red-700">
                    <div className="flex justify-between items-center relative z-10">
                        <span className="text-[10px] tracking-[0.5em] font-mono text-red-800/40 font-bold uppercase">Chronos / {now.getFullYear()}</span>
                        <div className="flex items-center gap-2">
                            <div className="w-1.5 h-1.5 rounded-full bg-red-600 animate-pulse"></div>
                            <span className="text-xs font-bold text-red-900/60 uppercase tracking-widest">Live</span>
                        </div>
                    </div>
                    <div className="my-8 relative z-10">
                        <div className="flex items-baseline gap-1">
                            <span className="text-7xl font-mono font-extralight tracking-tighter text-red-950">{hours}:{mins}</span>
                            <span className="text-2xl font-mono text-red-400">{secs}</span>
                        </div>
                    </div>
                    <div className="flex justify-between items-end relative z-10">
                        <div className="text-sm font-serif">
                            <div className="flex items-center gap-2 mb-1">
                                <span className="seal-effect text-[10px] font-bold">丙午马年</span>
                                <span className="text-red-800/40 text-[10px]">LUNAR YEAR</span>
                            </div>
                            <div className="font-black text-red-900">{shichenList[shichenIdx]}时 · 龙马精神</div>
                        </div>
                        <div className="text-5xl font-shufa text-red-700/10 select-none -mb-2">{shichenList[shichenIdx]}</div>
                    </div>
                </div>
            );
        };

        const ZenCalendar = () => {
            const now = getBeijingTime();
            const daysInMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
            const startDay = new Date(now.getFullYear(), now.getMonth(), 1).getDay();

            const cells = [];
            for (let i = 0; i < startDay; i++) cells.push(<div key={`p-${i}`} />);
            for (let d = 1; d <= daysInMonth; d++) {
                const isToday = d === now.getDate();
                cells.push(
                    <div key={d} className="flex items-center justify-center p-1 relative group/day">
                        {isToday && <div className="absolute inset-1.5 bg-red-600 rounded-lg shadow-lg shadow-red-200"></div>}
                        <div className={`w-8 h-8 flex items-center justify-center rounded-lg text-xs transition-all relative z-10
                            ${isToday ? 'text-white font-bold' : 'text-stone-400 hover:bg-red-50 hover:text-red-700'}`}>
                            {d}
                        </div>
                    </div>
                );
            }

            return (
                <div className="card-premium rounded-[40px] p-8 border-r-4 border-red-700/20">
                    <div className="flex justify-between items-center mb-6">
                        <div className="font-black text-xl font-serif text-red-900">{now.getFullYear()} <span className="text-red-200">/</span> {now.getMonth() + 1}</div>
                        <div className="w-8 h-8 rounded-full bg-red-50 flex items-center justify-center text-red-600">
                            <Icons.Calendar size={16} />
                        </div>
                    </div>
                    <div className="grid grid-cols-7 gap-y-2">
                        {['日','一','二','三','四','五','六'].map((w, i) => (
                            <span key={w} className={`text-[10px] font-bold mb-2 text-center ${i === 0 || i === 6 ? 'text-red-600/40' : 'text-stone-300'}`}>{w}</span>
                        ))}
                        {cells}
                    </div>
                </div>
            );
        };

        const CountdownHero = ({ event }) => {
            const [diff, setDiff] = useState(0);

            useEffect(() => {
                const calc = () => {
                    const d = new Date(event.date) - getBeijingTime();
                    setDiff(Math.max(0, Math.ceil(d / (1000 * 60 * 60 * 24))));
                };
                calc();
                const t = setInterval(calc, 60000);
                return () => clearInterval(t);
            }, [event.date]);

            return (
                <div className="hero-festive rounded-[48px] p-12 md:p-16 text-white h-full flex flex-col justify-between shadow-2xl relative group overflow-hidden">
                    {/* 动态装饰 */}
                    <div className="absolute top-0 right-0 w-full h-full pointer-events-none">
                        <div className="absolute -top-24 -right-24 w-96 h-96 border border-white/10 rounded-full animate-slow-rotate"></div>
                        <div className="absolute -top-12 -right-12 w-64 h-64 border border-yellow-400/10 rounded-full animate-slow-rotate" style={{animationDirection: 'reverse'}}></div>
                        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[radial-gradient(circle,rgba(255,255,255,0.05)_1px,transparent_1px)] bg-[size:30px_30px] opacity-20"></div>
                    </div>
                    
                    <div className="relative z-10">
                        <div className="inline-flex items-center gap-3 px-5 py-2 rounded-full bg-white/15 border border-white/20 backdrop-blur-xl text-[10px] font-bold tracking-[0.4em] mb-8 shadow-inner">
                            <span className="text-yellow-400">★</span> 岁首将至 · 迎禧接福
                        </div>
                        <h2 className="text-6xl md:text-8xl font-black mb-4 tracking-tighter drop-shadow-2xl">
                            {event.title}
                        </h2>
                        <div className="flex items-center gap-4 text-white/60 font-serif">
                            <span className="font-bold tracking-widest">{new Date(event.date).toLocaleDateString('zh-CN', {month:'long', day:'numeric'})}</span>
                            <div className="w-12 h-[1px] bg-white/20"></div>
                            <span className="italic uppercase text-[10px] tracking-[0.2em]">Year of the Horse</span>
                        </div>
                    </div>

                    <div className="relative z-10 mt-12 flex flex-col md:flex-row md:items-end gap-6">
                        <div className="flex items-baseline gap-4">
                            <span className="text-[140px] md:text-[200px] font-mono leading-none tracking-tighter font-thin drop-shadow-2xl">{diff}</span>
                            <div className="flex flex-col mb-4">
                                <span className="text-3xl font-serif font-bold text-white/90">昼夜</span>
                                <span className="text-[10px] font-mono text-yellow-400 font-bold tracking-[0.3em] uppercase">Count</span>
                            </div>
                        </div>
                        <div className="mb-6 h-12 w-12 border border-white/20 rounded-full flex items-center justify-center rotate-45 group-hover:rotate-[225deg] transition-transform duration-1000">
                             <Icons.ArrowRight size={24} className="text-yellow-400" />
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [events, setEvents] = useState([
                { id: 1, title: '春节 · 岁更替', date: '2026-02-17T00:00:00', type: 'fest' },
                { id: 2, title: '元宵 · 燃灯会', date: '2026-03-03T00:00:00', type: 'fest' },
                { id: 3, title: '惊蛰 · 始雷鸣', date: '2026-03-05T00:00:00', type: 'season' },
                { id: 4, title: '春分 · 阴阳匀', date: '2026-03-20T00:00:00', type: 'season' }
            ]);
            const [isAdding, setIsAdding] = useState(false);
            const [formData, setFormData] = useState({ title: '', date: '' });

            const sorted = useMemo(() => [...events].sort((a,b) => new Date(a.date) - new Date(b.date)), [events]);
            const hero = sorted[0];

            const deleteEvent = (id) => setEvents(events.filter(e => e.id !== id));

            return (
                <div className="min-h-screen pb-20">
                    <nav className="max-w-7xl mx-auto px-8 py-10 flex justify-between items-center">
                        <div className="group cursor-pointer">
                            <div className="flex items-center gap-5">
                                <div className="w-14 h-14 bg-red-700 rounded-2xl flex items-center justify-center text-white transition-all group-hover:rotate-12 group-hover:scale-110 shadow-xl shadow-red-200">
                                    <Icons.Horse size={28} />
                                </div>
                                <div>
                                    <h1 className="text-3xl font-black tracking-widest font-serif text-red-950">岁时记</h1>
                                    <p className="text-[9px] font-mono text-red-800/40 tracking-[0.5em] uppercase font-bold">Bingwu Year of Horse</p>
                                </div>
                            </div>
                        </div>
                        <button 
                            onClick={() => setIsAdding(true)}
                            className="px-6 py-3 bg-white border border-red-100 text-red-700 rounded-full flex items-center gap-3 hover:bg-red-700 hover:text-white transition-all duration-500 shadow-sm font-bold text-sm"
                        >
                            <Icons.Plus size={18} />
                            <span>新记时刻</span>
                        </button>
                    </nav>

                    <main className="max-w-7xl mx-auto px-8">
                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-10 mb-20">
                            <div className="lg:col-span-8 h-[650px]">
                                <CountdownHero event={hero} />
                            </div>
                            <div className="lg:col-span-4 flex flex-col gap-10">
                                <TimeDisplay />
                                <ZenCalendar />
                            </div>
                        </div>

                        <div className="flex items-center gap-4 mb-10">
                            <div className="h-px flex-1 bg-red-100"></div>
                            <span className="text-[10px] font-bold text-red-800/20 tracking-[1em] uppercase">Future Moments</span>
                            <div className="h-px flex-1 bg-red-100"></div>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
                            {sorted.slice(1).map(e => (
                                <div key={e.id} className="card-premium rounded-[48px] p-10 group relative flex flex-col justify-between min-h-[300px] border-b-4 border-red-100">
                                    <div className="flex justify-between items-start">
                                        <div className="w-12 h-12 bg-red-50 rounded-2xl flex items-center justify-center text-red-600 transition-colors group-hover:bg-red-600 group-hover:text-white">
                                            <Icons.Clock size={20} />
                                        </div>
                                        <button onClick={() => deleteEvent(e.id)} className="opacity-0 group-hover:opacity-100 p-2 text-stone-200 hover:text-red-600 transition-all"><Icons.Trash size={18}/></button>
                                    </div>
                                    <div className="mt-8">
                                        <h3 className="text-2xl font-serif font-black text-red-950 mb-1">{e.title}</h3>
                                        <div className="flex items-baseline gap-3">
                                            <span className="text-6xl font-mono font-light text-red-700">{Math.ceil((new Date(e.date) - getBeijingTime()) / 86400000)}</span>
                                            <span className="text-xs text-stone-300 uppercase font-bold tracking-widest">Days</span>
                                        </div>
                                    </div>
                                    <div className="mt-8 border-t border-red-50 pt-6 flex justify-between items-center">
                                        <span className="text-[10px] text-red-800/30 font-mono font-bold">{new Date(e.date).toLocaleDateString()}</span>
                                        <div className="w-8 h-8 rounded-full bg-red-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all">
                                            <Icons.ArrowRight size={14} className="text-red-600" />
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </main>

                    {isAdding && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-8 backdrop-blur-3xl bg-red-950/20">
                            <div className="absolute inset-0" onClick={() => setIsAdding(false)}></div>
                            <div className="relative w-full max-w-lg bg-white rounded-[60px] p-12 shadow-[0_50px_100px_rgba(153,27,27,0.2)] border border-red-50">
                                <div className="absolute -top-10 left-1/2 -translate-x-1/2 w-20 h-20 bg-red-700 rounded-3xl flex items-center justify-center text-white shadow-2xl">
                                    <Icons.Horse size={36} />
                                </div>
                                <h2 className="text-3xl font-serif font-black text-center mt-6 mb-10 text-red-950">记·拾光时刻</h2>
                                <div className="space-y-8">
                                    <div className="space-y-2">
                                        <label className="text-[10px] font-bold text-red-800/40 tracking-widest uppercase ml-4">时刻标题</label>
                                        <input 
                                            placeholder="输入时刻名称..." 
                                            className="w-full bg-red-50/50 border-none rounded-3xl p-6 focus:ring-2 focus:ring-red-600 transition-all font-serif text-lg text-red-950" 
                                            value={formData.title} 
                                            onChange={e => setFormData({...formData, title: e.target.value})} 
                                        />
                                    </div>
                                    <div className="space-y-2">
                                        <label className="text-[10px] font-bold text-red-800/40 tracking-widest uppercase ml-4">具体日期</label>
                                        <input 
                                            type="datetime-local" 
                                            className="w-full bg-red-50/50 border-none rounded-3xl p-6 font-mono text-red-900" 
                                            value={formData.date} 
                                            onChange={e => setFormData({...formData, date: e.target.value})} 
                                        />
                                    </div>
                                    <button 
                                        onClick={() => {
                                            if(!formData.title || !formData.date) return;
                                            setEvents([...events, { id: Date.now(), ...formData }]);
                                            setIsAdding(false);
                                            setFormData({title:'', date:''});
                                        }}
                                        className="w-full bg-red-700 text-white py-6 rounded-3xl font-black tracking-[0.5em] hover:bg-red-800 transition-all shadow-2xl shadow-red-200 text-lg"
                                    >
                                        开启倒数
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
